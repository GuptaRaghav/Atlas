var i=0;images=[],$canvas=$("#canvascontainer");var startX,startY,isDragging=!1;function dragimg(t){t.dataTransfer.setData("text",t.target.id)}function allowImgDrop(t){t.preventDefault()}function Imgdrop(t){t.preventDefault();var e=t.dataTransfer.getData("text"),a=document.getElementById(e).cloneNode(!0);a.id="newImg"+i,i++,this.canvas=document.getElementById("canvascontainer"),this.ctx=this.canvas.getContext("2d");var n=new Image;n.src=a.src,n.draggable=!0,this.ctx.drawImage(n,t.offsetX,t.offsetY),images.push({image:n,x:t.offsetX,y:t.offsetY,scale:.5,isDragging:!1,url:n.src,width:n.naturalWidth,height:n.naturalHeight}),n.onload=function(){_MouseEvents()}}function _MouseEvents(){this.canvas.onmousedown=function(t){t.preventDefault(),t.stopPropagation();var e=parseInt(t.clientX-$canvas.offset().left),a=parseInt(t.clientY-$canvas.offset().top);isDragging=!1;for(var n=0;n<images.length;n++){var s=images[n];e>s.x&&e<s.x+s.width&&a>s.y&&a<s.y+s.height&&(s.isDragging=!0,isDragging=!0)}startX=e,startY=a},this.canvas.onmousemove=function(t){if(isDragging){t.preventDefault(),t.stopPropagation(),canvas.style.cursor="grabbing";for(var e=parseInt(t.clientX-$canvas.offset().left),a=parseInt(t.clientY-$canvas.offset().top),n=e-startX,s=a-startY,i=0;i<images.length;i++){var o=images[i];o.isDragging&&(o.x+=n,o.y+=s)}startX=e,startY=a,renderAll()}},this.canvas.onmouseup=function(t){t.preventDefault(),t.stopPropagation(),isDragging=!1;for(var e=0;e<images.length;e++)images[e].isDragging=!1;canvas.style.cursor="default"},this.canvas.onmouseout=function(t){t.preventDefault(),t.stopPropagation(),isDragging=!1;for(var e=0;e<images.length;e++)images[e].isDragging=!1}}function renderAll(){this.ctx.fillStyle="#ffffff",this.ctx.fillRect(0,0,this.canvas.width,this.canvas.height);for(var t=0;t<images.length;t++){var e=images[t];this.ctx.drawImage(e.image,e.x,e.y)}}function allowDrop(t){t.preventDefault()}function drop(t){t.preventDefault(),document.getElementById("image").style.left=t.x,document.getElementById("image").style.top=t.y;var e=t.dataTransfer.getData("text");document.getElementById(e).style.top=t.x,t.target.appendChild(document.getElementById(e))}function dragMouseDown(t){console.log(t)}function makeResizableDiv(t){const e=document.querySelector(t),a=document.querySelectorAll(t+" .resizer"),n=20;let s=0,i=0,o=0,g=0,r=0,l=0;for(let t=0;t<a.length;t++){const f=a[t];function c(t){if(f.classList.contains("bottom-right")){const a=s+(t.pageX-r),o=i+(t.pageY-l);a>n&&(e.style.width=a+"px"),o>n&&(e.style.height=o+"px")}else if(f.classList.contains("bottom-left")){const a=i+(t.pageY-l),g=s-(t.pageX-r);a>n&&(e.style.height=a+"px"),g>n&&(e.style.width=g+"px",e.style.left=o+(t.pageX-r)+"px")}else if(f.classList.contains("top-right")){const a=s+(t.pageX-r),o=i-(t.pageY-l);a>n&&(e.style.width=a+"px"),o>n&&(e.style.height=o+"px",e.style.top=g+(t.pageY-l)+"px")}else{const a=s-(t.pageX-r),c=i-(t.pageY-l);a>n&&(e.style.width=a+"px",e.style.left=o+(t.pageX-r)+"px"),c>n&&(e.style.height=c+"px",e.style.top=g+(t.pageY-l)+"px")}}function p(){window.removeEventListener("mousemove",c)}f.addEventListener("mousedown",function(t){t.preventDefault(),s=parseFloat(getComputedStyle(e,null).getPropertyValue("width").replace("px","")),i=parseFloat(getComputedStyle(e,null).getPropertyValue("height").replace("px","")),o=e.getBoundingClientRect().left,g=e.getBoundingClientRect().top,r=t.pageX,l=t.pageY,window.addEventListener("mousemove",c),window.addEventListener("mouseup",p)})}}$(document).ready(function(){$(".nav-link").click(function(){$(".nav-link").removeClass("active"),$(".itemcontainer").hide(),$("#"+$(this).attr("div-id")).show(),$(this).addClass("active")})}),makeResizableDiv(".resizable");